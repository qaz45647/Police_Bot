# Discord_Bot - 支語警察機器人

![https://truth.bahamut.com.tw/s01/202108/c61d64f20c8e88f03d4d9e9ec8b793cb.JPG](https://truth.bahamut.com.tw/s01/202108/c61d64f20c8e88f03d4d9e9ec8b793cb.JPG)

## 主功能：

機器人會偵測每次傳送的訊息中是否提到關鍵字，如果提到會發訊息提醒，並加入違規清單![https://truth.bahamut.com.tw/s01/202410/c9f515f8daff60157d84a0e7d6782bad.JPG](https://truth.bahamut.com.tw/s01/202410/c9f515f8daff60157d84a0e7d6782bad.JPG)

如果違規清單出現重複用戶3次，會給該用戶"囚犯"身分組，並到公告頻道通知

![https://truth.bahamut.com.tw/s01/202410/d331dcc764543af3da766bc6a916b693.PNG](https://truth.bahamut.com.tw/s01/202410/d331dcc764543af3da766bc6a916b693.PNG)

![https://truth.bahamut.com.tw/s01/202410/40030af05ab7cb88305b13776122e17b.PNG](https://truth.bahamut.com.tw/s01/202410/40030af05ab7cb88305b13776122e17b.PNG)

懲罰時間結束後，機器人會移除你的"囚犯"身份組，並到公告頻道通知

![https://truth.bahamut.com.tw/s01/202410/f3e7e0018320212b5889bb1385c5718b.PNG](https://truth.bahamut.com.tw/s01/202410/f3e7e0018320212b5889bb1385c5718b.PNG)

## 指令：

### [公告頻道 頻道id

設定公告頻道的id，機器人會在這裡發佈通知

![https://truth.bahamut.com.tw/s01/202410/419ca08dd63129e4de5e738998dbe269.PNG](https://truth.bahamut.com.tw/s01/202410/419ca08dd63129e4de5e738998dbe269.PNG)

### [囚犯身分組 囚犯身分組id

設定囚犯身分組的id，違規用戶會被賦予此身分組

![https://truth.bahamut.com.tw/s01/202410/451366dbd0ca1022ec68ca49ffaa537f.PNG](https://truth.bahamut.com.tw/s01/202410/451366dbd0ca1022ec68ca49ffaa537f.PNG)

### [違規次數 數字

修改機器人判定入獄的違規次數

![https://truth.bahamut.com.tw/s01/202410/ed9ede2ef3bb681fab9a8a1224f157b9.PNG](https://truth.bahamut.com.tw/s01/202410/ed9ede2ef3bb681fab9a8a1224f157b9.PNG)

### [刑期 數字

修改違規用戶維持"囚犯"身分組的時間

單位：秒s

![https://truth.bahamut.com.tw/s01/202410/59132dd707d59c738136239cb14c8780.PNG](https://truth.bahamut.com.tw/s01/202410/59132dd707d59c738136239cb14c8780.PNG)

### [支語清單

顯示支語清單

![https://truth.bahamut.com.tw/s01/202410/4ae8bff6c914224245cb9ba2f34bf55e.PNG?width=836&height=620](https://truth.bahamut.com.tw/s01/202410/4ae8bff6c914224245cb9ba2f34bf55e.PNG?width=836&height=620)

### [新增支語 支語 正確用法

 新增關鍵字給機器人作判斷![https://truth.bahamut.com.tw/s01/202410/adda14a305599f511ac430368e3cc684.PNG](https://truth.bahamut.com.tw/s01/202410/adda14a305599f511ac430368e3cc684.PNG)

### [移除支語 支語 正確用法

移除指定關鍵字

![https://truth.bahamut.com.tw/s01/202410/9c5694c4e7177cab2af0c29284d504df.PNG](https://truth.bahamut.com.tw/s01/202410/9c5694c4e7177cab2af0c29284d504df.PNG)

### [我的違規次數

顯示使用者的違規次數與剩餘扣打

![https://truth.bahamut.com.tw/s01/202410/945b9e09b3a74d661d653cefafb3be8c.PNG](https://truth.bahamut.com.tw/s01/202410/945b9e09b3a74d661d653cefafb3be8c.PNG)

### [呼叫支語警察

隨機生成一張支語警察(共61張)

![https://truth.bahamut.com.tw/s01/202410/1a02fa87d8ca2e20613cefb97a90ea96.JPG](https://truth.bahamut.com.tw/s01/202410/1a02fa87d8ca2e20613cefb97a90ea96.JPG)

### [呼叫支語大隊長

叫出我們酷酷的支語大隊長

![[https://upload.cc/i1/2024/10/19/wQFdW7.gif](https://github.com/qaz45647/Police_Bot/blob/main/IMG01.gif)]([https://upload.cc/i1/2024/10/19/wQFdW7.gif](https://github.com/qaz45647/Police_Bot/blob/main/IMG01.gif))

## 使用須知：

### 前置作業 – discord

建立好自己的機器人後，邀請到群組裡

在群組中建立"警察"身分組，並給機器人添加此身分組

除基本權限外，需額外給予：

 ■需給予"警察"身分組「管理身分組」的權限

 ■需給予"警察"身分組在「公告頻道」發言的權限

在群組中建立"囚犯"身分組

 ■自定義權限，如：關閉發送訊息、新增反應等

### 請注意警察身分組的排序，排序低的身分組無法對用戶新增排序高的身分組

![https://truth.bahamut.com.tw/s01/202410/94a80866bb07e317150648a156c4dace.PNG](https://truth.bahamut.com.tw/s01/202410/94a80866bb07e317150648a156c4dace.PNG)

![https://truth.bahamut.com.tw/s01/202410/3226a8f771dcf72cd7d4892c5a8768d6.PNG](https://truth.bahamut.com.tw/s01/202410/3226a8f771dcf72cd7d4892c5a8768d6.PNG)

如果沒理解錯的話;;

### 前置作業 – 程式

將機器人的TOKEN放到json檔的bot_TOKEN中

`"bot_TOKEN":"your bot token"`

打開Bot.py 修改頻道與囚犯身分組ID

`channel_id = 867417685994242099`

`prisoner_id = 867416055366287361`

前置作業完成後，打開終端機就能運行了

如要讓機器人保持24小時在線，可參考[這支影片](https://youtu.be/UT1h9un4Cpo)的教學

## 其他注意事項：

■機器人關閉後，程式會停止運作，所以記得手動幫有"囚犯"身分組的使用者移除身分組

###### (不然他就只能永遠當囚犯了)

■一台機器人只能為一個伺服器服務

■機器人關閉後，使用指令加入、修改的參數會重置，所以建議在程式端修改完機器人再執行

■在機器人移除"囚犯"身分組前，如果手動移除"囚犯"身分組，以下程式還是會照常執行

`await asyncio.sleep(sleep)  #"sleep"秒後`

`await member.remove_roles(prisoner)  #移除囚犯身分組`

`await channel.send(item +"已從監獄中解放")  #公告`

 我太爛了，解決不了這個問題
